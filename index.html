<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MANCHESTER Content Studio 2026</title>
    <style>
        :root{--vermelho:#C41E3A;--dourado:#C9A227;--preto:#0a0a0a;--preto2:#111;--preto3:#1a1a1a;--preto4:#222;--branco:#fff;--cinza:#888;--verde:#22c55e}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--preto);color:var(--branco);min-height:100vh}
        
        .header{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;background:var(--preto2);border-bottom:1px solid #333;position:sticky;top:0;z-index:100}
        .logo{display:flex;align-items:center;gap:12px}
        .logo-icon{width:42px;height:42px;background:var(--vermelho);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:900}
        .logo-text{font-size:18px;font-weight:900;letter-spacing:2px}
        .logo-sub{font-size:9px;color:var(--cinza)}
        .header-btns{display:flex;gap:10px}
        .btn{padding:8px 16px;background:var(--preto3);border:1px solid #444;border-radius:6px;color:#fff;font-size:12px;cursor:pointer}
        .btn:hover{border-color:var(--vermelho)}
        .btn-primary{background:var(--vermelho);border-color:var(--vermelho)}
        
        .layout{display:flex;height:calc(100vh - 72px)}
        
        .sidebar{width:280px;background:var(--preto2);border-right:1px solid #333;overflow-y:auto;padding:20px}
        .sidebar-title{font-size:10px;color:var(--cinza);letter-spacing:2px;margin-bottom:15px}
        .month-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:20px}
        .month-btn{padding:12px 5px;background:var(--preto3);border:1px solid #333;border-radius:8px;color:var(--cinza);font-size:10px;font-weight:600;cursor:pointer;text-align:center}
        .month-btn:hover{border-color:var(--vermelho);color:#fff}
        .month-btn.active{background:var(--vermelho);border-color:var(--vermelho);color:#fff}
        .stats{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:20px}
        .stat{background:var(--preto3);border-radius:10px;padding:15px;text-align:center}
        .stat-num{font-size:28px;font-weight:900;color:var(--vermelho)}
        .stat-label{font-size:9px;color:var(--cinza);text-transform:uppercase}
        .theme-box{background:var(--preto3);border-radius:10px;padding:20px;border:1px solid #333}
        .theme-label{font-size:9px;color:var(--vermelho);margin-bottom:5px}
        .theme-name{font-size:20px;font-weight:900;margin-bottom:8px}
        .theme-desc{font-size:12px;color:var(--cinza);line-height:1.5}
        
        .main{flex:1;overflow-y:auto;padding:25px}
        .main-title{font-size:26px;font-weight:900;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #333}
        .main-title span{color:var(--vermelho)}
        
        .posts{display:flex;flex-direction:column;gap:10px}
        .post{display:flex;align-items:center;gap:20px;padding:18px;background:var(--preto2);border:1px solid #333;border-radius:12px;cursor:pointer;transition:all .2s}
        .post:hover{border-color:var(--vermelho);transform:translateX(5px)}
        .post-date{background:var(--preto3);border-radius:8px;padding:10px;text-align:center;min-width:50px}
        .post-day{font-size:20px;font-weight:900;color:var(--vermelho)}
        .post-month{font-size:9px;color:var(--cinza)}
        .post-info{flex:1}
        .post-type{font-size:10px;color:var(--dourado);font-weight:700;margin-bottom:4px}
        .post-title{font-size:14px;font-weight:600;margin-bottom:3px}
        .post-desc{font-size:11px;color:var(--cinza)}
        .post-format{background:var(--preto3);padding:6px 12px;border-radius:6px;font-size:10px;color:var(--cinza)}
        
        .overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:1000;justify-content:center;align-items:flex-start;padding:30px;overflow-y:auto}
        .overlay.show{display:flex}
        .modal{width:100%;max-width:900px;background:var(--preto2);border-radius:12px;border:1px solid #333}
        .modal-head{padding:20px;background:var(--preto3);border-bottom:1px solid #333;display:flex;justify-content:space-between;align-items:flex-start}
        .modal-left{flex:1}
        .modal-badge{display:inline-block;padding:4px 12px;background:rgba(196,30,58,0.2);border:1px solid var(--vermelho);border-radius:20px;font-size:10px;color:var(--vermelho);font-weight:700;margin-bottom:10px}
        .modal-inputs{display:flex;gap:15px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
        .modal-date{background:var(--preto4);border:1px solid #444;border-radius:6px;padding:8px;color:#fff;font-size:13px}
        .modal-title{flex:1;min-width:200px;background:transparent;border:none;border-bottom:2px solid #444;color:#fff;font-size:16px;font-weight:700;padding:5px 0}
        .modal-title:focus{outline:none;border-color:var(--vermelho)}
        .modal-desc{font-size:12px;color:var(--cinza)}
        .close-btn{width:36px;height:36px;background:var(--preto4);border:1px solid #444;border-radius:50%;color:#fff;font-size:16px;cursor:pointer}
        .close-btn:hover{border-color:var(--vermelho);color:var(--vermelho)}
        
        .tabs{display:flex;background:var(--preto3);border-bottom:1px solid #333}
        .tab{flex:1;padding:15px;background:transparent;border:none;color:var(--cinza);font-size:11px;font-weight:600;cursor:pointer;border-bottom:3px solid transparent}
        .tab:hover{color:#fff}
        .tab.active{color:var(--vermelho);border-color:var(--vermelho)}
        
        .modal-body{padding:20px;max-height:55vh;overflow-y:auto}
        .section{background:var(--preto3);border-radius:10px;overflow:hidden}
        .section-head{display:flex;justify-content:space-between;align-items:center;padding:12px 15px;background:var(--preto4);border-bottom:1px solid #333}
        .section-title{font-size:12px;font-weight:700;color:var(--dourado)}
        .copy-btn{padding:6px 14px;background:var(--preto2);border:1px solid #444;border-radius:6px;color:#fff;font-size:10px;cursor:pointer}
        .copy-btn:hover{background:var(--vermelho);border-color:var(--vermelho)}
        .section-content{padding:15px;font-size:12px;line-height:1.7;white-space:pre-wrap;color:#ccc;font-family:monospace;background:var(--preto);max-height:350px;overflow-y:auto}
        
        .block{margin-bottom:12px;background:var(--preto);border-radius:8px;border:1px solid #333;overflow:hidden}
        .block-head{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background:var(--preto4)}
        .block-num{width:24px;height:24px;background:var(--vermelho);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;margin-right:10px}
        .block-title{font-size:11px;font-weight:600;color:var(--dourado);flex:1}
        .block-content{padding:12px 15px;font-size:11px;line-height:1.6;white-space:pre-wrap;color:#bbb;font-family:monospace;max-height:180px;overflow-y:auto}
        
        .toast{position:fixed;bottom:30px;right:30px;padding:12px 24px;background:var(--verde);color:#fff;border-radius:8px;font-weight:600;font-size:13px;opacity:0;transform:translateY(20px);transition:all .3s;z-index:2000}
        .toast.show{opacity:1;transform:translateY(0)}
        
        .empty{text-align:center;padding:60px;color:var(--cinza)}
        
        @media(max-width:768px){.sidebar{display:none}.main{padding:15px}}
    </style>
</head>
<body>

<header class="header">
    <div class="logo">
        <div class="logo-icon">M</div>
        <div>
            <div class="logo-text">MANCHESTER</div>
            <div class="logo-sub">Content Studio 2026</div>
        </div>
    </div>
    <div class="header-btns">
        <button class="btn" id="btnBackup">ğŸ’¾ Backup</button>
        <button class="btn" id="btnImport">ğŸ“‚ Importar</button>
        <input type="file" id="fileInput" accept=".json" style="display:none">
        <button class="btn btn-primary" id="btnSave">âœ“ Salvar</button>
    </div>
</header>

<div class="layout">
    <aside class="sidebar">
        <div class="sidebar-title">SELECIONAR MÃŠS</div>
        <div class="month-grid" id="monthGrid"></div>
        <div class="sidebar-title">ESTATÃSTICAS</div>
        <div class="stats">
            <div class="stat"><div class="stat-num" id="statPosts">0</div><div class="stat-label">Posts</div></div>
            <div class="stat"><div class="stat-num" id="statStories">0</div><div class="stat-label">Stories</div></div>
        </div>
        <div class="theme-box">
            <div class="theme-label">TEMA DO MÃŠS</div>
            <div class="theme-name" id="themeName">-</div>
            <div class="theme-desc" id="themeDesc">-</div>
        </div>
    </aside>
    
    <main class="main">
        <h1 class="main-title" id="mainTitle">-</h1>
        <div class="posts" id="postsList"></div>
    </main>
</div>

<div class="overlay" id="overlay">
    <div class="modal">
        <div class="modal-head">
            <div class="modal-left">
                <div class="modal-badge" id="modalBadge">POST</div>
                <div class="modal-inputs">
                    <input type="date" class="modal-date" id="modalDate">
                    <input type="text" class="modal-title" id="modalTitle" placeholder="TÃ­tulo...">
                </div>
                <div class="modal-desc" id="modalDesc"></div>
            </div>
            <button class="close-btn" id="closeBtn">âœ•</button>
        </div>
        <div class="tabs" id="tabsContainer"></div>
        <div class="modal-body" id="modalBody"></div>
    </div>
</div>

<div class="toast" id="toast"></div>

<script>
(function() {
    // ========== DADOS ==========
    var MONTHS = [
        {id:1,name:'Janeiro',short:'JAN',theme:'Planejamento',posts:13,stories:3,desc:'OrganizaÃ§Ã£o para o ano.'},
        {id:2,name:'Fevereiro',short:'FEV',theme:'SeguranÃ§a',posts:11,stories:5,desc:'EPIs e prevenÃ§Ã£o.'},
        {id:3,name:'MarÃ§o',short:'MAR',theme:'Mulheres',posts:12,stories:0,desc:'Dia da Mulher.'},
        {id:4,name:'Abril',short:'ABR',theme:'MÃªs do AÃ§o',posts:13,stories:6,desc:'Dia Nacional do AÃ§o.'},
        {id:5,name:'Maio',short:'MAI',theme:'IndÃºstria',posts:13,stories:3,desc:'Dia da IndÃºstria.'},
        {id:6,name:'Junho',short:'JUN',theme:'SustentÃ¡vel',posts:12,stories:3,desc:'Meio ambiente.'},
        {id:7,name:'Julho',short:'JUL',theme:'ConstruÃ§Ã£o',posts:13,stories:0,desc:'TÃ©cnicas.'},
        {id:8,name:'Agosto',short:'AGO',theme:'Soldador',posts:13,stories:0,desc:'Dia do Soldador.'},
        {id:9,name:'Setembro',short:'SET',theme:'Set. Amarelo',posts:13,stories:3,desc:'SaÃºde mental.'},
        {id:10,name:'Outubro',short:'OUT',theme:'Out. Rosa',posts:13,stories:3,desc:'ConscientizaÃ§Ã£o.'},
        {id:11,name:'Novembro',short:'NOV',theme:'Black Friday',posts:13,stories:6,desc:'PromoÃ§Ãµes.'},
        {id:12,name:'Dezembro',short:'DEZ',theme:'Retrospectiva',posts:13,stories:5,desc:'BalanÃ§o do ano.'}
    ];

    var INITIAL_DATA = {
        1: [
            {id:1,date:'2026-01-01',type:'DATA ESPECIAL',format:'Carrossel',title:'ğŸ† Feliz 2026!',desc:'Ano novo Manchester',
            narrativa:'SLIDE 1 â€” CAPA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTEXTO: "2026 CHEGOU!"\nSUBTEXTO: "Novas fundaÃ§Ãµes"\n\n---\n\nSLIDE 2 â€” RETRO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTEXTO: "500+ toneladas"\nNÃšMEROS: 200+ obras\n\n---\n\nSLIDE 3 â€” THANKS\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTEXTO: "Obrigado parceiros"',
            imagem:'PROMPT SLIDE 1\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nNew Year celebration, steel company\nFireworks, construction silhouette\nColor: Red #C41E3A, Gold\nCamera: Sony A7R IV, 35mm\n\n---\n\nPROMPT SLIDE 2\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nInfographic dark background\nLarge numbers "500+"\nClean typography\n\n---\n\nPROMPT SLIDE 3\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTeam collage, golden hour\nEngineers smiling\nWarm emotional mood',
            video:'TAKE 1 (0:00-0:03)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nDrone rising over construction\nGolden hour lighting\nText: "2026"\n\n---\n\nTAKE 2 (0:03-0:08)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nMontage: welding, CNC, truck\nQuick cuts synced to music\n\n---\n\nTAKE 3 (0:08-0:12)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTeam slow motion\nSmiling faces\n\n---\n\nTAKE 4 (0:12-0:15)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nLogo reveal\n"Construindo o futuro"',
            tela:'SLIDE 1:\n"2026 CHEGOU!"\n\nSLIDE 2:\n"500+ toneladas"\n\nSLIDE 3:\n"OBRIGADO"',
            legenda:'ğŸ† FELIZ 2026!\n\nMais um ano construindo juntos.\n\n500+ toneladas entregues.\n200+ obras atendidas.\n\nObrigado parceiros!\n\nğŸ“ (21) 3214-1300\n\n#Manchester #2026'},
            
            {id:2,date:'2026-01-05',type:'PROBLEMA â†’ SOLUÃ‡ÃƒO',format:'Reels 30s',title:'ğŸ˜¤ AÃ§o veio errado',desc:'Medida errada resolvida',
            narrativa:'[0:00-0:03] HOOK\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nÃudio: "AÃ§o chegou errado"\nTexto: "ACONTECEU COM VOCÃŠ?"\n\n---\n\n[0:03-0:10] PROBLEMA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nNarraÃ§Ã£o: "Pediu 10mm, veio 8mm"\nTexto: "2 SEMANAS PERDIDAS"\n\n---\n\n[0:10-0:23] SOLUÃ‡ÃƒO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nNarraÃ§Ã£o: "Na Manchester conferimos tudo"\nTexto: "CONFERÃŠNCIA â†’ CORTE â†’ ENTREGA"\n\n---\n\n[0:23-0:30] CTA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTexto: "ZERO ERRO"\nLogo Manchester',
            imagem:'PROMPT THUMBNAIL\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nSplit comparison Before/After\n\nLEFT - PROBLEM:\nMessy site, wrong bars\nCold desaturated colors\nText: "ERRADO"\n\n---\n\nRIGHT - SOLUTION:\nOrganized site, labeled bars\nWarm vibrant colors\nText: "CERTO"',
            video:'CENA 1 â€” HOOK\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nClose-up frustrated engineer\n85mm lens, shallow DOF\nDramatic sound hit\n\n---\n\nCENA 2 â€” PROBLEMA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nDrone over idle site\nWrong measurements shown\nCold blue color grade\n\n---\n\nCENA 3 â€” SOLUÃ‡ÃƒO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCNC cutting (slow-mo)\nLabeling process\nWarm vibrant colors\n\n---\n\nCENA 4 â€” CTA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nSatisfied engineer\nLogo Manchester\nContact info',
            tela:'[0:00-0:03]\n"ACONTECEU COM VOCÃŠ?"\n\n[0:03-0:10]\n"2 SEMANAS PERDIDAS"\n\n[0:23-0:30]\n"ZERO ERRO"',
            legenda:'ğŸ˜¤ AÃ§o chegou errado?\n\nPediu 10mm, veio 8mm.\n2 semanas perdidas.\n\nNa Manchester:\nâœ… Conferimos projeto\nâœ… Validamos medidas\nâœ… Zero erro\n\nğŸ“ (21) 3214-1300\n\n#Manchester #BelgoPronto'},
            
            {id:3,date:'2026-01-07',type:'EDUCATIVO',format:'Carrossel 8',title:'ğŸ“‹ Checklist compra aÃ§o',desc:'5 passos essenciais',
            narrativa:'SLIDE 1 â€” CAPA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTÃ­tulo: "CHECKLIST 2026"\nBadge: "SALVA ğŸ“Œ"\n\n---\n\nSLIDE 2 â€” PASSO 1\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ“ REVISAR PROJETO\nDica: "PeÃ§a .dwg atualizado"\n\n---\n\nSLIDE 3 â€” PASSO 2\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ§® CALCULAR QUANTITATIVOS\nDica: "Chutar sai caro"\n\n---\n\nSLIDE 4 â€” PASSO 3\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ“… PRAZO ENTREGA\n3-7 dias corte/dobra\n\n---\n\nSLIDE 5 â€” CTA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"PRECISA DE AJUDA?"\nğŸ“ (21) 3214-1300',
            imagem:'PROMPT CAPA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nChecklist icon, dark bg\nTitle "CHECKLIST 2026"\nRed to black gradient\n\n---\n\nPROMPT SLIDES 2-4\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nInfographic template\nStep number large red\nIcon white outline\nTip box darker bg\n\n---\n\nPROMPT CTA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nSolid red background\nWhite centered text\nManchester logo',
            video:'[0:00-0:02] HOOK\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nText: "5 PASSOS"\n\n---\n\n[0:02-0:15] PASSOS\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nAnimated icons\nStep numbers\n\n---\n\n[0:15-0:20] CTA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"SALVA ğŸ“Œ"',
            tela:'SLIDE 1: "CHECKLIST 2026"\nSLIDE 2: "01 REVISAR PROJETO"\nSLIDE 3: "02 CALCULAR"\nSLIDE 4: "03 PRAZO"\nSLIDE 5: "ğŸ“ 3214-1300"',
            legenda:'ğŸ“‹ CHECKLIST 2026\n\nâœ… Revisar projeto\nâœ… Calcular quantitativos\nâœ… Considerar prazo\nâœ… Verificar normas\nâœ… Alinhar cronograma\n\nğŸ’¡ ANTECIPE A COMPRA!\n\nSALVA ğŸ“Œ\n\n#Manchester #Checklist'},
            
            {id:4,date:'2026-01-10',type:'DATA ESPECIAL',format:'VÃ­deo 30s',title:'ğŸ‘· Dia do Engenheiro',desc:'Homenagem 10/01',
            narrativa:'[0:00-0:05] ABERTURA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nObras icÃ´nicas\nText: "10 DE JANEIRO"\n\n---\n\n[0:05-0:15] HOMENAGEM\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nEngenheiros trabalhando\nText: "VocÃªs transformam nÃºmeros em estruturas"\n\n---\n\n[0:15-0:25] MANCHESTER\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nParceria\nText: "30 anos juntos"\n\n---\n\n[0:25-0:30] FECHAMENTO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nLogo\nText: "FELIZ DIA! ğŸ‘·"',
            imagem:'PROMPT PRINCIPAL\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nEngineer heroic pose\nConstruction background\nGolden hour lighting\nCinematic commercial style',
            video:'[0:00-0:05]\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nDrone shots\nTime-lapse building\nEmotional piano\n\n---\n\n[0:05-0:15]\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nEngineers montage\nReviewing plans\nTeam coordination\n\n---\n\n[0:15-0:30]\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nManchester delivery\nLogo reveal\nFELIZ DIA!',
            tela:'[0:00] "10 DE JANEIRO"\n[0:05] "VocÃªs transformam"\n[0:15] "30 anos juntos"\n[0:25] "FELIZ DIA! ğŸ‘·"',
            legenda:'ğŸ‘· FELIZ DIA DO ENGENHEIRO CIVIL!\n\nVocÃªs transformam:\nğŸ“ NÃºmeros em estruturas\nğŸ“‹ Projetos em realidade\n\n30 anos construindo juntos!\n\n#DiaDoEngenheiro #Manchester'}
        ],
        2: [
            {id:1,date:'2026-02-02',type:'PROBLEMA â†’ SOLUÃ‡ÃƒO',format:'Reels 30s',title:'ğŸ˜° OperÃ¡rio caiu da laje',desc:'SeguranÃ§a no canteiro',
            narrativa:'[0:00-0:03] HOOK\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTexto: "ACONTECEU ONTEM"\nVisual: Tela preta\n\n---\n\n[0:03-0:10] PROBLEMA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nNarraÃ§Ã£o: "Sem cinto, sem linha de vida"\nTexto: "QUEDA DE 4 METROS"\n\n---\n\n[0:10-0:15] CONSEQUÃŠNCIA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTexto: "6 meses afastado"\n\n---\n\n[0:15-0:23] SOLUÃ‡ÃƒO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nTexto: "âœ“ LINHA DE VIDA"\n"âœ“ CINTO"\n\n---\n\n[0:23-0:30] CTA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"SUA OBRA TEM?"',
            imagem:'PROMPT THUMBNAIL\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nSafety split image\n\nLEFT - DANGER:\nWorker no protection\nRed warning tint\n\n---\n\nRIGHT - SAFE:\nWorker with PPE\nGreen accent',
            video:'CENA 1 â€” HOOK\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nBlack screen, text appears\nSiren sound\n\n---\n\nCENA 2 â€” PROBLEMA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nConstruction b-roll\nCold desaturated\n\n---\n\nCENA 3 â€” SOLUÃ‡ÃƒO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nOrganized site with PPE\nWarm positive colors\n\n---\n\nCENA 4 â€” CTA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•\nLogo Manchester\n"SeguranÃ§a primeiro"',
            tela:'[0:00] "ACONTECEU ONTEM"\n[0:03] "SEM PROTEÃ‡ÃƒO"\n[0:10] "6 MESES AFASTADO"\n[0:23] "SUA OBRA TEM?"',
            legenda:'ğŸ˜° Aconteceu ontem.\n\nOperÃ¡rio na laje.\nSem cinto. Sem linha de vida.\nQueda de 4 metros.\n\nğŸ’” 6 meses afastado\n\nSeguranÃ§a Ã© INVESTIMENTO:\nâœ… Linha de vida\nâœ… Cinto obrigatÃ³rio\nâœ… Treinamento\n\nSUA OBRA TEM?\n\n#SeguranÃ§a #NR18 #Manchester'}
        ]
    };

    var TABS = [
        {key:'narrativa',icon:'ğŸ“',label:'NARRATIVA'},
        {key:'imagem',icon:'ğŸ–¼ï¸',label:'IMAGEM'},
        {key:'video',icon:'ğŸ¬',label:'VÃDEO'},
        {key:'tela',icon:'ğŸ“º',label:'TELA'},
        {key:'legenda',icon:'ğŸ“±',label:'LEGENDA'}
    ];

    // ========== ESTADO ==========
    var state = {
        month: 1,
        tab: 'narrativa',
        post: null,
        data: null
    };

    // ========== ELEMENTOS ==========
    var els = {};

    // ========== FUNÃ‡Ã•ES ==========
    function $(id) { return document.getElementById(id); }
    
    function load() {
        try {
            var saved = localStorage.getItem('manchester_v4');
            state.data = saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(INITIAL_DATA));
        } catch(e) {
            state.data = JSON.parse(JSON.stringify(INITIAL_DATA));
        }
    }

    function save() {
        try {
            localStorage.setItem('manchester_v4', JSON.stringify(state.data));
            toast('âœ“ Salvo!');
        } catch(e) {
            toast('Erro ao salvar');
        }
    }

    function backup() {
        var blob = new Blob([JSON.stringify({v:'4',d:new Date().toISOString(),data:state.data}, null, 2)], {type:'application/json'});
        var a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'manchester_' + new Date().toISOString().split('T')[0] + '.json';
        a.click();
        toast('âœ“ Backup!');
    }

    function importFile(e) {
        var file = e.target.files[0];
        if (!file) return;
        var reader = new FileReader();
        reader.onload = function(ev) {
            try {
                var d = JSON.parse(ev.target.result);
                state.data = d.data || d.posts || d;
                save();
                renderPosts();
                toast('âœ“ Importado!');
            } catch(err) {
                toast('Arquivo invÃ¡lido');
            }
        };
        reader.readAsText(file);
    }

    function renderMonths() {
        var html = '';
        for (var i = 0; i < MONTHS.length; i++) {
            var m = MONTHS[i];
            var cls = m.id === state.month ? 'month-btn active' : 'month-btn';
            html += '<button class="' + cls + '" data-month="' + m.id + '">' + m.short + '</button>';
        }
        $('monthGrid').innerHTML = html;
    }

    function updateSidebar() {
        var m = MONTHS[state.month - 1];
        $('statPosts').textContent = m.posts;
        $('statStories').textContent = m.stories;
        $('themeName').textContent = m.theme;
        $('themeDesc').textContent = m.desc;
    }

    function renderPosts() {
        var m = MONTHS[state.month - 1];
        $('mainTitle').innerHTML = m.name.toUpperCase() + ' â€” <span>' + m.theme + '</span>';
        
        var posts = state.data[state.month] || [];
        if (!posts.length) {
            $('postsList').innerHTML = '<div class="empty"><h3>ğŸš§ Em desenvolvimento</h3></div>';
            return;
        }
        
        posts.sort(function(a,b) { return new Date(a.date) - new Date(b.date); });
        
        var html = '';
        for (var i = 0; i < posts.length; i++) {
            var p = posts[i];
            var d = new Date(p.date);
            var day = String(d.getDate()).padStart(2,'0');
            var mon = MONTHS[d.getMonth()].short;
            
            html += '<div class="post" data-id="' + p.id + '">' +
                '<div class="post-date"><div class="post-day">' + day + '</div><div class="post-month">' + mon + '</div></div>' +
                '<div class="post-info"><div class="post-type">' + p.type + '</div><div class="post-title">' + p.title + '</div><div class="post-desc">' + p.desc + '</div></div>' +
                '<div class="post-format">' + p.format + '</div></div>';
        }
        $('postsList').innerHTML = html;
    }

    function openModal(id) {
        var posts = state.data[state.month] || [];
        state.post = null;
        for (var i = 0; i < posts.length; i++) {
            if (posts[i].id === id) {
                state.post = posts[i];
                break;
            }
        }
        if (!state.post) return;

        $('modalBadge').textContent = 'POST #' + String(state.post.id).padStart(2,'0') + ' Â· ' + state.post.format;
        $('modalDate').value = state.post.date;
        $('modalTitle').value = state.post.title;
        $('modalDesc').textContent = state.post.desc;

        state.tab = 'narrativa';
        renderTabs();
        renderContent();
        $('overlay').classList.add('show');
    }

    function closeModal() {
        $('overlay').classList.remove('show');
    }

    function renderTabs() {
        var html = '';
        for (var i = 0; i < TABS.length; i++) {
            var t = TABS[i];
            var cls = t.key === state.tab ? 'tab active' : 'tab';
            html += '<button class="' + cls + '" data-tab="' + t.key + '">' + t.icon + ' ' + t.label + '</button>';
        }
        $('tabsContainer').innerHTML = html;
    }

    function splitBlocks(content) {
        var blocks = [];
        var parts = content.split(/\n---\n/);
        for (var i = 0; i < parts.length; i++) {
            var p = parts[i].trim();
            if (p.length > 10) {
                var lines = p.split('\n');
                var title = lines[0].replace(/[â•â”â”€\[\]]/g, '').trim() || 'BLOCO ' + (i+1);
                blocks.push({title: title.substring(0, 40), content: p});
            }
        }
        if (!blocks.length) blocks.push({title: 'CONTEÃšDO', content: content});
        return blocks;
    }

    function esc(text) {
        var d = document.createElement('div');
        d.textContent = text;
        return d.innerHTML;
    }

    function renderContent() {
        var content = state.post[state.tab] || 'Sem conteÃºdo';
        var body = $('modalBody');

        if ((state.tab === 'imagem' || state.tab === 'video' || state.tab === 'narrativa') && content.indexOf('---') > -1) {
            var blocks = splitBlocks(content);
            var html = '<div class="section"><div class="section-head"><div class="section-title">' + TABS.find(function(t){return t.key===state.tab}).icon + ' ' + blocks.length + ' BLOCOS</div><button class="copy-btn" data-copy="all">ğŸ“‹ Copiar Tudo</button></div></div>';
            
            for (var i = 0; i < blocks.length; i++) {
                html += '<div class="block"><div class="block-head"><div class="block-num">' + (i+1) + '</div><div class="block-title">' + esc(blocks[i].title) + '</div><button class="copy-btn" data-copy="' + i + '">ğŸ“‹</button></div><div class="block-content" id="block' + i + '">' + esc(blocks[i].content) + '</div></div>';
            }
            body.innerHTML = html;
        } else {
            body.innerHTML = '<div class="section"><div class="section-head"><div class="section-title">' + TABS.find(function(t){return t.key===state.tab}).icon + ' CONTEÃšDO</div><button class="copy-btn" data-copy="all">ğŸ“‹ Copiar</button></div><div class="section-content" id="mainContent">' + esc(content) + '</div></div>';
        }
    }

    function copyText(index) {
        var text;
        if (index === 'all') {
            text = state.post[state.tab];
        } else {
            var el = $('block' + index);
            text = el ? el.textContent : '';
        }
        navigator.clipboard.writeText(text).then(function() {
            toast('âœ“ Copiado!');
        });
    }

    function toast(msg) {
        var t = $('toast');
        t.textContent = msg;
        t.classList.add('show');
        setTimeout(function() { t.classList.remove('show'); }, 2000);
    }

    // ========== EVENTOS ==========
    function init() {
        load();
        renderMonths();
        updateSidebar();
        renderPosts();

        $('btnBackup').onclick = backup;
        $('btnImport').onclick = function() { $('fileInput').click(); };
        $('fileInput').onchange = importFile;
        $('btnSave').onclick = save;
        $('closeBtn').onclick = closeModal;

        $('monthGrid').onclick = function(e) {
            if (e.target.dataset.month) {
                state.month = parseInt(e.target.dataset.month);
                renderMonths();
                updateSidebar();
                renderPosts();
            }
        };

        $('postsList').onclick = function(e) {
            var post = e.target.closest('.post');
            if (post && post.dataset.id) {
                openModal(parseInt(post.dataset.id));
            }
        };

        $('tabsContainer').onclick = function(e) {
            if (e.target.dataset.tab) {
                state.tab = e.target.dataset.tab;
                renderTabs();
                renderContent();
            }
        };

        $('modalBody').onclick = function(e) {
            if (e.target.dataset.copy !== undefined) {
                copyText(e.target.dataset.copy);
            }
        };

        $('overlay').onclick = function(e) {
            if (e.target === $('overlay')) closeModal();
        };

        $('modalDate').onchange = function() {
            if (state.post) {
                state.post.date = this.value;
                save();
                renderPosts();
            }
        };

        $('modalTitle').onchange = function() {
            if (state.post) {
                state.post.title = this.value;
                save();
                renderPosts();
            }
        };

        document.onkeydown = function(e) {
            if (e.key === 'Escape') closeModal();
        };
    }

    // ========== START ==========
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
})();
</script>
</body>
</html>
